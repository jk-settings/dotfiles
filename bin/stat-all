#!/bin/bash

echo "DATE `date-dr`"
echo "HOST `hostname`"
echo "UPT  `stat-up`"
echo "CPU  `stat-cpu`"
echo "RAM  `stat-ram`"
echo "HDD  `stat-disk`"
echo "USR  `stat-usr`"
echo "WHO  `stat-who`"

count=0
ZFSLIST=`zpool status | egrep -o "pool\: ([[:alnum:]]*)" | awk '{ print $NF }'`
for a in ${ZFSLIST} ; do
  count=$(( count + 1 ))
  if [ $count -eq 1 ]; then
    echo -n "ZFS  "
  else
    echo -n "     "
  fi
  echo "`stat-zfs $a`"
done

if which sshd-finger >/dev/null 2>&1; then
  echo "SSH  `sshd-finger`"
fi
count=0
NICLIST=`ifconfig -l`
for a in ${NICLIST} ; do
  if [ "$a" != "lo0" -a "$a" != "stf0" -a "$a" != "gif0" -a "$a" != "pflog0" -a "$a" != "fwe0" -a "$a" != "fwip0" -a "$a" != "ipfw0" ]; then
    count=$(( count + 1 ))
    if [ $count -eq 1 ]; then
      echo -n "NET  "
    else
      echo -n "     "
    fi
    echo "$a   `net-mac $a`   `net-ip $a`"
  fi
done

count=0
net-connections | while read line; do
  count=$(( count + 1 ))
  if [ $count -eq 1 ]; then
    echo -n "CON  "
  else
    echo -n "     "
  fi
  echo "$line"
done

