#!/bin/sh

case `uname -s` in
  "Darwin")
    lsof -i -n | \
      awk '$9 ~ /([0-9]{1,3}\.){3}[0-9]/ && !/127.0.0.1.*127.0.0.1/ { $4=$5=$6=$7=$8="" ; print }' | \
      column -t
    ;;
  "FreeBSD")
    sockstat -46 | \
      awk '$6 ~ /[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/ {$4=$5="";print}; $7 ~ !/127.0.0.1/ {$4=$5="";print}' | \
      column -t
    ;;
esac

